module.exports = function loadmode(CodeMirror) {
    GLOBAL.CodeMirror = CodeMirror;
    if (!CodeMirror.modeURL) CodeMirror.modeURL = "../../../codemirror/mode/%N/%N.js";

    CodeMirror.requireMode = function(mode) {
        if (typeof mode != "string") mode = mode.name;
        if (!CodeMirror.modes.hasOwnProperty(mode)) {
            require(CodeMirror.modeURL.replace(/%N/g, mode));
        }
    };

    // Load all modes.
    var modes = ["asterisk", "clike", "clojure", "coffeescript", "commonlisp", "css", "d", "diff", "ecl", "erlang", "gfm", "go", "groovy", "haskell", "haxe", "htmlembedded", "htmlmixed", "http", "javascript", "jinja2", "less", "lua", "markdown", "mysql", "ntriples", "ocaml", "pascal", "perl", "php", "pig", "plsql", "properties", "python", "r", "rst", "ruby", "rust", "sass", "scheme", "shell", "sieve", "smalltalk", "smarty", "sparql", "sql", "stex", "tiddlywiki", "tiki", "vb", "vbscript", "velocity", "verilog", "xml", "xquery", "yaml", "z80"];

    modes.forEach(function(mode) {
        CodeMirror.requireMode(mode);
    });
};
